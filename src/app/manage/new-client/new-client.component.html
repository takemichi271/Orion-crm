<main class="max-w-5xl mx-auto py-12 px-6">
  <div class="bg-white border border-slate-200 rounded-2xl overflow-hidden">
    <form [formGroup]="clientForm">
      <div class="p-10">
        <div class="mb-12">
          <div class="flex items-center gap-3 mb-8">
            <h3 class="text-xl font-bold text-slate-900">Nuevo cliente</h3>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
            <div class="col-span-1">
              <label
                class="block text-sm font-bold text-slate-700 mb-2"
                for="enterpriseName"
                >Nombre de la empresa <span class="text-red-500">*</span></label
              >
              <input
                class="w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-4 focus:ring-primary/10 focus:border-primary outline-none transition-all placeholder:text-slate-400 text-slate-900"
                id="enterpriseName"
                name="enterpriseName"
                formControlName="enterpriseName"
                placeholder="e.j. Claro Dominicana"
                required=""
                type="text"
              />
            </div>
            <div class="col-span-1">
              <label
                class="block text-sm font-bold text-slate-700 mb-2"
                for="clientName"
                >Persona de contacto</label
              >
              <div class="relative">
                <input
                  class="w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-4 focus:ring-primary/10 focus:border-primary outline-none transition-all placeholder:text-slate-400 text-slate-900"
                  id="clientName"
                  name="clientName"
                  formControlName="clientName"
                  placeholder="e.j. Jhon Doe"
                  type="text"
                />
              </div>
            </div>
            <div class="col-span-1">
              <label
                class="block text-sm font-bold text-slate-700 mb-2"
                for="rnc"
                >RNC</label
              >
              <div class="relative">
                <input
                  class="w-full pl-4 pr-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-4 focus:ring-primary/10 focus:border-primary outline-none transition-all placeholder:text-slate-400 text-slate-900"
                  id="rnc"
                  name="rnc"
                  formControlName="rnc"
                  placeholder="e.j. x-xx-xxxxx-x"
                  type="text"
                  appRncMask
                />
              </div>
            </div>
          </div>
        </div>
        <div class="h-px bg-slate-100 mb-12"></div>
        <div class="mb-4">
          <div class="flex items-center gap-3 mb-8">
            <h3 class="text-xl font-bold text-slate-900">
              Información de contacto
            </h3>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
            <div class="col-span-1">
              <label
                class="block text-sm font-bold text-slate-700 mb-2"
                for="contact-email"
                >Email de la empresa <span class="text-red-500">*</span></label
              >
              <input
                class="w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-4 focus:ring-primary/10 focus:border-primary outline-none transition-all placeholder:text-slate-400 text-slate-900"
                id="contact-email"
                name="contact-email"
                formControlName="email"
                placeholder="e.j.doe@example.com"
                required=""
                type="email"
              />
            </div>
            <div class="col-span-1">
              <label
                class="block text-sm font-bold text-slate-700 mb-2"
                for="contact-phone"
                >Teléfono</label
              >
              <input
                class="w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-4 focus:ring-primary/10 focus:border-primary outline-none transition-all placeholder:text-slate-400 text-slate-900"
                id="contact-phone"
                name="contact-phone"
                formControlName="phone"
                placeholder="(809) 000-0000"
                type="tel"
                appPhoneMask
              />
            </div>
          </div>
        </div>
        <div class="h-px bg-slate-100 mb-12"></div>
        <div class="mb-4">
          <div class="flex items-center gap-3 mb-8">
            <h3 class="text-xl font-bold text-slate-900">Imagen del cliente</h3>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
            <div class="col-span-1">
              <label
                class="block text-sm font-bold text-slate-700 mb-2"
                for="imageUrl"
                >URL de la imagen</label
              >
              <input
                class="w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-4 focus:ring-primary/10 focus:border-primary outline-none transition-all placeholder:text-slate-400 text-slate-900"
                id="imageUrl"
                name="imageUrl"
                formControlName="imageUrl"
                placeholder="https://example.com/image.jpg"
                type="url"
              />
              <p class="text-xs text-slate-500 mt-2">
                Puedes usar URLs de Google Drive, Google Photos o cualquier
                enlace de imagen compartido
              </p>
            </div>
            <div class="col-span-1">
              <label class="block text-sm font-bold text-slate-700 mb-2"
                >Vista previa</label
              >
              <div
                class="w-full h-100 bg-slate-100 rounded-xl border border-slate-200 flex items-center justify-center overflow-hidden"
              >
                @if (clientForm.get("imageUrl")?.value) {
                  <img
                    [src]="clientForm.get('imageUrl')?.value"
                    alt="Imagen del cliente"
                    class="w-full h-full object-contain"
                    (error)="onImageError()"
                  />
                } @else {
                  <span class="text-slate-400 text-sm">Sin imagen</span>
                }
              </div>
            </div>
          </div>
        </div>
        @if (editingClient) {
          <div class="h-px bg-slate-100 mb-12"></div>
          <div class="mb-4">
            <div class="flex items-center gap-3 mb-8">
              <h3 class="text-xl font-bold text-slate-900">
                Estado del cliente
              </h3>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-x-8 gap-y-4">
              <div class="flex items-center">
                <input
                  class="w-4 h-4 accent-primary"
                  id="status-active"
                  type="radio"
                  formControlName="status"
                  value="Active"
                />
                <label
                  class="ml-3 text-sm font-medium text-slate-700 cursor-pointer"
                  for="status-active"
                >
                  Activo
                </label>
              </div>
              <div class="flex items-center">
                <input
                  class="w-4 h-4 accent-primary"
                  id="status-pending"
                  type="radio"
                  formControlName="status"
                  value="Pending"
                />
                <label
                  class="ml-3 text-sm font-medium text-slate-700 cursor-pointer"
                  for="status-pending"
                >
                  Pendiente
                </label>
              </div>
              <div class="flex items-center">
                <input
                  class="w-4 h-4 accent-primary"
                  id="status-inactive"
                  type="radio"
                  formControlName="status"
                  value="Inactive"
                />
                <label
                  class="ml-3 text-sm font-medium text-slate-700 cursor-pointer"
                  for="status-inactive"
                >
                  Inactivo
                </label>
              </div>
            </div>
          </div>
        }
      </div>
      <div
        class="bg-slate-50/50 px-10 py-8 flex items-center justify-between border-t border-slate-100"
      >
        <div>
          @if (!editingClient) {
            <button
              class="text-sm font-bold text-slate-500 hover:text-slate-900 transition-colors flex items-center gap-2"
              type="button"
              (click)="goBack()"
            >
              Cancelar
            </button>
          } @else {}
        </div>
        <div>
          <div class="flex items-center gap-4">
            <button
              (click)="saveClient()"
              class="bg-blue-600 text-white px-8 py-3 rounded-xl font-bold shadow-md shadow-primary/20 hover:bg-blue-600 hover:shadow-lg transition-all flex items-center gap-2"
              type="button"
            >
              Guardar
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</main>
